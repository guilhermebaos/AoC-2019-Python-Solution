def line_2d(p1=(), p2=()):
    try:
        m = (p2[1] - p1[1]) / (p2[0] - p1[0])
        b = p1[1] - m * p1[0]
        return [m, b]
    except ZeroDivisionError:
        if p2[1] == p1[1]:
            return ['']
        else:
            m = 'N.D.'
            b = 'N.D.'
            return [m, b]


def unique_list(lst):
    to_eliminate = []
    for c, item in enumerate(lst):
        if lst.index(item) != c:
            to_eliminate += [c]
    to_eliminate.sort(reverse=True)
    for c in to_eliminate:
        lst.pop(c)
    return lst


# Find a point: map_puzzle[y][x]
map_puzzle = [['.', '#', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.', '.', '.', '.', '#', '.', '.', '#', '.', '.', '.', '.', '.', '.', '#', '.', '.', '#', '#', '.', '.', '#'], ['.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '#', '#', '.', '#', '#', '.', '.', '.', '.', '.', '.', '.'], ['#', '#', '.', '.', '.', '.', '.', '.', '#', '.', '#', '.', '.', '#', '.', '.', '#', '.', '.', '#', '#', '.', '.', '.', '#', '.', '#', '#', '.', '#', '#', '#', '.', '.', '.', '.'], ['.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '#', '#', '.', '.', '.'], ['.', '#', '#', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '#', '.', '#', '.', '.', '.', '.', '.'], ['.', '#', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.', '.', '.', '.', '#', '.', '#', '#', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.', '.', '.', '#'], ['#', '.', '.', '.', '#', '.', '.', '#', '#', '.', '.', '.', '.', '#', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.'], ['.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '#', '.', '#', '.', '.', '.', '.', '.', '#', '.', '.', '#', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '#', '.', '.'], ['.', '.', '.', '.', '.', '.', '#', '#', '#', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '#', '#', '.', '#', '.', '.', '.'], ['#', '.', '.', '.', '.', '.', '.', '#', '.', '.', '#', '.', '.', '.', '.', '.', '#', '.', '.', '#', '.', '.', '.', '.', '.', '.', '#', '.', '.', '#', '.', '.', '#', '#', '#', '#'], ['.', '#', '#', '.', '.', '.', '#', '#', '.', '.', '.', '.', '.', '.', '#', '#', '.', '.', '#', '#', '#', '#', '#', '.', '.', '.', '.', '.', '.', '.', '#', '#', '.', '.', '.', '.'], ['.', '.', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '#', '.', '.'], ['.', '.', '.', '.', '#', '#', '.', '.', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '#', '#', '.', '.', '#', '.', '.', '.', '.', '#'], ['.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '#', '#', '#', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.', '#'], ['.', '.', '.', '.', '#', '.', '.', '#', '.', '#', '.', '#', '#', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '#', '.', '#'], ['#', '#', '.', '.', '.', '.', '#', '#', '#', '.', '.', '.', '.', '#', '#', '.', '.', '#', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.'], ['.', '.', '.', '.', '.', '#', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '#', '.', '.', '.', '.', '#'], ['.', '#', '#', '#', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '#', '.', '#', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '#', '#', '.', '#', '#', '.', '.', '.', '.'], ['.', '.', '.', '#', '#', '.', '.', '.', '#', '#', '.', '.', '.', '.', '#', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.'], ['.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '#', '#', '.', '.', '.', '.', '#', '.', '.', '#', '.', '#', '.', '#', '.', '.', '.', '#', '#', '.', '#', '.', '.', '.', '#', '.'], ['#', '.', '.', '.', '#', '.', '#', '.', '#', '.', '#', '.', '.', '#', '#', '.', '#', '.', '.', '.', '#', '.', '.', '#', '.', '.', '#', '.', '.', '#', '.', '.', '.', '.', '.', '.'], ['.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.', '.', '#', '.', '#', '.', '.', '.', '.', '.', '#', '.', '#', '.', '.', '.', '.', '.', '#', '.', '#', '#', '#', '#'], ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '#', '.', '#', '#', '.'], ['.', '.', '.', '.', '#', '.', '.', '.', '.', '#', '.', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.', '#', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '#', '.', '.', '.'], ['.', '#', '#', '#', '#', '#', '.', '.', '#', '#', '#', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.'], ['#', '.', '.', '.', '.', '#', '.', '#', '.', '.', '#', '.', '.', '#', '.', '.', '.', '.', '#', '#', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.', '.', '.', '.'], ['.', '.', '.', '#', '#', '#', '#', '.', '.', '.', '.', '#', '.', '.', '#', '.', '.', '.', '.', '.', '.', '#', '.', '#', '.', '.', '.', '#', '#', '.', '.', '.', '.', '.', '#', '.'], ['.', '.', '#', '#', '.', '.', '.', '.', '#', '.', '#', '#', '#', '.', '#', '#', '.', '#', '.', '#', '#', '.', '#', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '#'], ['.', '.', '.', '.', '#', '.', '#', '#', '#', '#', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '#', '#', '#', '.', '.', '.', '.', '.', '#', '#', '.', '.', '.', '.', '.', '.'], ['.', '#', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '#', '.', '.', '#', '.', '.', '#', '.', '#', '.', '.', '#', '.', '.', '.', '.', '.'], ['.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '#', '#', '.', '.', '.', '#', '.', '.', '.', '.', '.'], ['#', '.', '.', '.', '.', '.', '#', '#', '#', '#', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '#', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.'], ['.', '.', '#', '#', '.', '.', '#', '.', '.', '#', '.', '.', '.', '.', '.', '#', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '#', '.', '#', '.', '#', '#'], ['.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '#', '.', '#', '.', '#', '#', '.', '.', '.', '.', '.', '.', '.', '#', '#'], ['#', '.', '.', '#', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.', '#', '.', '.', '.', '.', '#', '.', '#', '.', '.', '.', '.', '.', '.', '.', '#', '#', '#', '#', '.', '.', '#'], ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '#', '.', '#', '.', '#', '.', '.']]

test1 = [['.', '.', '.', '.', '.', '.', '#', '.', '#', '.'], ['#', '.', '.', '#', '.', '#', '.', '.', '.', '.'], ['.', '.', '#', '#', '#', '#', '#', '#', '#', '.'], ['.', '#', '.', '#', '.', '#', '#', '#', '.', '.'], ['.', '#', '.', '.', '#', '.', '.', '.', '.', '.'], ['.', '.', '#', '.', '.', '.', '.', '#', '.', '#'], ['#', '.', '.', '#', '.', '.', '.', '.', '#', '.'], ['.', '#', '#', '.', '#', '.', '.', '#', '#', '#'], ['#', '#', '.', '.', '.', '#', '.', '.', '#', '.'], ['.', '#', '.', '.', '.', '.', '#', '#', '#', '#']]
test2 = [['#', '.', '#', '.', '.', '.', '#', '.', '#', '.'], ['.', '#', '#', '#', '.', '.', '.', '.', '#', '.'], ['.', '#', '.', '.', '.', '.', '#', '.', '.', '.'], ['#', '#', '.', '#', '.', '#', '.', '#', '.', '#'], ['.', '.', '.', '.', '#', '.', '#', '.', '#', '.'], ['.', '#', '#', '.', '.', '#', '#', '#', '.', '#'], ['.', '.', '#', '.', '.', '.', '#', '#', '.', '.'], ['.', '.', '#', '#', '.', '.', '.', '.', '#', '#'], ['.', '.', '.', '.', '.', '.', '#', '.', '.', '.'], ['.', '#', '#', '#', '#', '.', '#', '#', '#', '.']]
test3 = [['.', '#', '.', '.', '#', '.', '.', '#', '#', '#'], ['#', '#', '#', '#', '.', '#', '#', '#', '.', '#'], ['.', '.', '.', '.', '#', '#', '#', '.', '#', '.'], ['.', '.', '#', '#', '#', '.', '#', '#', '.', '#'], ['#', '#', '.', '#', '#', '.', '#', '.', '#', '.'], ['.', '.', '.', '.', '#', '#', '#', '.', '.', '#'], ['.', '.', '#', '.', '#', '.', '.', '#', '.', '#'], ['#', '.', '.', '#', '.', '#', '.', '#', '#', '#'], ['.', '#', '#', '.', '.', '.', '#', '#', '.', '#'], ['.', '.', '.', '.', '.', '#', '.', '#', '.', '.']]
test4 = [['.', '#', '.', '.', '#', '#', '.', '#', '#', '#', '.', '.', '.', '#', '#', '#', '#', '#', '#', '#'], ['#', '#', '.', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '.', '.', '#', '#', '.'], ['.', '#', '.', '#', '#', '#', '#', '#', '#', '.', '#', '#', '#', '#', '#', '#', '#', '#', '.', '#'], ['.', '#', '#', '#', '.', '#', '#', '#', '#', '#', '#', '#', '.', '#', '#', '#', '#', '.', '#', '.'], ['#', '#', '#', '#', '#', '.', '#', '#', '.', '#', '.', '#', '#', '.', '#', '#', '#', '.', '#', '#'], ['.', '.', '#', '#', '#', '#', '#', '.', '.', '#', '.', '#', '#', '#', '#', '#', '#', '#', '#', '#'], ['#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#'], ['#', '.', '#', '#', '#', '#', '.', '.', '.', '.', '#', '#', '#', '.', '#', '.', '#', '.', '#', '#'], ['#', '#', '.', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#'], ['#', '#', '#', '#', '#', '.', '#', '#', '.', '#', '#', '#', '.', '.', '#', '#', '#', '#', '.', '.'], ['.', '.', '#', '#', '#', '#', '#', '#', '.', '.', '#', '#', '.', '#', '#', '#', '#', '#', '#', '#'], ['#', '#', '#', '#', '.', '#', '#', '.', '#', '#', '#', '#', '.', '.', '.', '#', '#', '.', '.', '#'], ['.', '#', '#', '#', '#', '#', '.', '.', '#', '.', '#', '#', '#', '#', '#', '#', '.', '#', '#', '#'], ['#', '#', '.', '.', '.', '#', '.', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '.', '.', '.'], ['#', '.', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '.', '#', '#', '#', '#', '#', '#', '#'], ['.', '#', '#', '#', '#', '.', '#', '.', '#', '#', '#', '.', '#', '#', '#', '.', '#', '.', '#', '#'], ['.', '.', '.', '.', '#', '#', '.', '#', '#', '.', '#', '#', '#', '.', '.', '#', '#', '#', '#', '#'], ['.', '#', '.', '#', '.', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '.', '#', '#', '#'], ['#', '.', '#', '.', '#', '.', '#', '#', '#', '#', '#', '.', '#', '#', '#', '#', '.', '#', '#', '#'], ['#', '#', '#', '.', '#', '#', '.', '#', '#', '#', '#', '.', '#', '#', '.', '#', '.', '.', '#', '#']]

Map = map_puzzle[:]

# Coordinates of the asteroids
astro_coor = []
y = -1
for line in Map:
    y += 1
    x = -1
    for point in line:
        x += 1
        if point == '#':
            astro_coor += [[x, y]]

# Lines that the asteroids make with other asteroids
lines_of_sight = []
for astro1 in astro_coor:
    lines_astro1 = []
    for astro2 in astro_coor:
        if astro1 == astro2:
            pass
        else:
            if astro2[0] > astro1[0]:
                lines_astro1 += [[line_2d(astro1, astro2), 'xup']]
            elif astro2[0] < astro1[0]:
                lines_astro1 += [[line_2d(astro1, astro2), 'xdown']]
            elif astro2[1] > astro1[1]:
                lines_astro1 += [[line_2d(astro1, astro2), 'yup']]
            elif astro2[1] < astro1[1]:
                lines_astro1 += [[line_2d(astro1, astro2), 'ydown']]
    lines_of_sight += [lines_astro1]

# Number of unique lines
num_lines = []
for lines in lines_of_sight:
    unique_list(lines)
    num_lines += [len(lines)]

print('\n\n\n' + str(max(num_lines)), num_lines, '\n')
laser_coor = astro_coor[num_lines.index(max(num_lines))]
print(laser_coor)
